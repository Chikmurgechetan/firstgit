<html>
  <head>
    <title>Expense Tracker</title>
  </head>
  <body>
    <h1 style="color: red;">-:Expense Tracker:-</h1>
    <hr>
    <form onsubmit="saveToLocalStorage(event)">
      <label>Choose ExpenseAmount</label><br>
      <input type="text" id="amount" name="ExpenseAmount" required/><br>
      <label>Choose Description</label><br>
      <input type="text" id="description" name="ChooseDescription" required/><br>
      <label  for="category" >Choose a Category:</label><br>
      <select id="category" name="Category" required>
      <option value="Movie">Movie</option>
        <option value="Desile">Desile</option>
        <option value="Pizza">Pizza</option>
        <option value="book">book</option>
      </select><br>
      <button>Add Expense</button>
    </form>
    <ul id="DetailsofExpenses"></ul>
   <script>
    function saveToLocalStorage(event){
      event.preventDefault();
      const amount = event.target.ExpenseAmount.value;
      const description = event.target.ChooseDescription.value;
      const category = event.target.Category.value;
     // localStorage.setItem('amount',amount);
      //localStorage.setItem('description',description);
      //localStorage.setItem('category',category);
      const obj = {
        amount:amount,
        description:description,
        category:category

        
      }
      localStorage.setItem(obj.amount,JSON.stringify(obj));
      shownewExpensesOnScreen(obj);
    }

    window.addEventListener("DOMContentLoaded", (event) => {
                const localStorageObj = localStorage;
                const localstoragekeys  = Object.keys(localStorageObj)

                for(var i =0; i< localstoragekeys.length; i++){
                    const key = localstoragekeys[i]
                    const ExpensesDetailsString = localStorageObj[key];
                    const ExpensesDetailsObj = JSON.parse(ExpensesDetailsString);
                    shownewExpensesOnScreen(ExpensesDetailsObj)
                }
            })
     


     function shownewExpensesOnScreen(Expenses)
     {
      const parentNode = document.getElementById("DetailsofExpenses");
      const childHTML = `<li id=${Expenses.amount}>${Expenses.amount}-${Expenses.description}-${Expenses.category}
              <button onclick=deleteExpense('${Expenses.amount}')>Delete Expense</button>  
  <button onclick=editExpenseDetails('${Expenses.amount}','${Expenses.description}','${Expenses.category}')>Edits Expenses</button>
    
        </li>`

      parentNode.innerHTML = parentNode.innerHTML+childHTML;
     }
    //edit
    function editExpenseDetails(ExpenseAmount,description,category){
      document.getElementById('amount').value=ExpenseAmount;
      document.getElementById('description').value=description;
      document.getElementById('category').value=category;

      deleteExpense(ExpenseAmount);

    }
     

      function deleteExpense(ExpenseAmount){
        console.log(ExpenseAmount);
       localStorage.removeItem(ExpenseAmount);
        removeExpensesFromScreen(ExpenseAmount);
      }
      function removeExpensesFromScreen(ExpenseAmount){
        const parentNode = document.getElementById("DetailsofExpenses");
        const childNodeToBeDeleted = document.getElementById(ExpenseAmount);
        parentNode.removeChild(childNodeToBeDeleted);
      }


   </script>

  </body>
</html>
